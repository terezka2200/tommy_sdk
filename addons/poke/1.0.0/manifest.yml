---
  name: "Poke"
  package: "poke"
  version: "1.0.0"
  summary: "Unleash your inner mongrel."
  description: "This is a super imaginative long description for the Poke addon."
  author: "Kam Low"
  homepage: "http://sourcey.com"
  private: false
  dependencies: &dependencies
    email: "*"
    message: "*"
    poke: "1.0.0"
  tasks:
    -
      module: "default"
      name: "Default"
      description: "Task that fires the `poke.triggers.default` trigger."
      execute: "tasks/poke.js"
  triggers:
    -
      module: "default"
      name: "Default"
      description: "Trigger that contains a single message string parameter."
      parameters:
        message:
          type: "string"
          required: true
  actions:
    -
      module: "message"
      name: "Poke to message"
      description: "Send a poke message to users at scheduled intervals."
      task: "poke.tasks.default"
      trigger: "poke.triggers.default"
      activity: "message.activities.send"
      mappings:
        message:
          name: "Message text"
          type: "variable"
          value: "trigger.message"
      dependencies: *dependencies
      schedule:
        kind: "interval"
        frequency: "secondly"
        interval: 30
    -
      module: "email"
      name: "Poke to email"
      description: "Send a poke message to user email addresses at scheduled intervals."
      task: "poke.tasks.default"
      trigger: "poke.triggers.default"
      activity: "email.activities.send"
      mappings:
        subject:
          name: "Email subject"
          type: "text"
          value: "Hello %{user.first_name}"
        body:
          name: "Email body"
          type: "variable"
          value: "trigger.message"
      dependencies: *dependencies
      schedule:
        kind: "interval"
        frequency: "secondly"
        interval: 30
  views:
    -
      id: "Poke"
      title: "Poke"
      file: "views/main.html"
      type: "page"
      framed: false
      default: true
      assets:
        -
          type: "stylesheet"
          file: "views/main.css"
        -
          type: "javascript"
          file: "views/main.js"
        -
          file: "views/main.tpl.html"
          type: "template"
